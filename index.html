<html>
<body>

<form action="/submit" method="post">
	<!-- DECA -->
	Име:<input style="max-width:5rem" name='user' id='user'></input>

	<!-- ZADACHI -->
	Задача:
	<select id='prob' name='prob'>
		<option value="dp1">леха - само число</option>
		<option value="dp2">леха - число и път</option>
		<option value="rodcut">въже</option>
	</select>

	<br>

	<div id=statement></div>

	<br>

	<!-- CODE -->
	<textarea style="width:100%;height:auto" id="code" name="code"></textarea>

	<br>

	<!-- SUBMIT -->
	<input type="submit" value="Submit">
</form>

<script>
	const userinp = document.getElementById('user');
	userinp.value = localStorage.getItem('user');
	userinp.onchange = () => {
		localStorage.setItem('user', userinp.value);
	};

	const showStatement = () => {
		fetch(`/statement/${probinp.value}`)
		.then(resp => resp.text())
		.then(html => {
			document.getElementById('statement').innerHTML = html;
		});
	};

	const probinp = document.getElementById('prob');
	probinp.value = localStorage.getItem('prob');
	probinp.onchange = () => {
		localStorage.setItem('prob', probinp.value);
		showStatement();
	};

	showStatement();
</script>

</body>
</html>
